{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nconst echarts = require('echarts/lib/echarts');\n\nrequire('echarts/lib/component/title');\n\nrequire('echarts/lib/component/tooltip');\n\nrequire('echarts/lib/component/legend');\n\nrequire('echarts/lib/chart/pie');\n\nexport default {\n  name: \"Pie.vue\",\n  props: ['chosenDataPie', 'dataOfCheckPie', 'typeOfOptionsPie'],\n\n  data() {\n    return {\n      typeName: []\n    };\n  },\n\n  created() {\n    let i, j; // 按照后端提供的i，相应地对应报表名称\n\n    for (i = 0; i < this.dataOfCheckPie.length; i++) {\n      for (j = 0; j < this.typeOfOptionsPie.length; j++) {\n        if (this.dataOfCheckPie[i] == this.typeOfOptionsPie[j].id) {\n          this.typeName.push(this.typeOfOptionsPie[j].name);\n          break;\n        }\n      }\n    }\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      this.initEcharts();\n    });\n  },\n\n  methods: {\n    rowStyle() {\n      return 'text-align: center';\n    },\n\n    tableRowClassName({\n      row,\n      rowIndex\n    }) {\n      if (row.num > 15) {\n        return 'warning-row';\n      } else if (row.num < 8) {\n        return 'success-row';\n      }\n\n      return 'normal-row';\n    },\n\n    initEcharts() {\n      this.chosenDataPie.forEach((val, index) => {\n        let serviceData = [];\n\n        for (let i = 0; i < this.chosenDataPie[index].arr.length; i++) {\n          let obj = new Object();\n          obj.name = this.chosenDataPie[index].arr[i].string;\n          obj.value = this.chosenDataPie[index].arr[i].num;\n          serviceData[i] = obj;\n        }\n\n        let i = 0;\n        let myChart = echarts.init(document.getElementById(`chartPie${index}`));\n        let option = {\n          title: {\n            text: this.typeName[index],\n            left: '50%',\n            textAlign: 'center'\n          },\n          tooltip: {\n            trigger: 'item'\n          },\n          legend: {\n            orient: 'vertical',\n            bottom: 'bottom',\n            left: 'center',\n            data: serviceData.name,\n            top: '80%',\n            align: 'left',\n            //图例在左，文字在右\n            width: '440',\n            // 这个定义图例的总宽度，\n            textStyle: {\n              color: 'black',\n              width: 130,\n              overflow: 'break'\n            }\n          },\n          series: [{\n            type: 'pie',\n            radius: '50%',\n            center: ['50%', '42%'],\n            data: serviceData,\n            itemStyle: {\n              normal: {\n                color: function (colors) {\n                  let colorList = ['#65B581', '#FFCE34', '#FD665F', '#ffff79', '#ffac27', '#ff4333', '#ffdca7', '#afff79'];\n\n                  if (colorList[colors.dataIndex] == null) {\n                    colorList.push(colorList[i]);\n                    i = (i + 1) % 8;\n                    return colorList[8];\n                  }\n\n                  return colorList[colors.dataIndex];\n                }\n              }\n            }\n          }]\n        };\n        myChart.setOption(option);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;;AACAA;;AACAA;;AACAA;;AACAA;;AAEA;EACAC,eADA;EAEAC,8DAFA;;EAGAC;IACA;MACAC;IADA;EAGA,CAPA;;EAQAC;IACA,SADA,CAEA;;IACA;MACA;QACA;UACA;UACA;QACA;MACA;IACA;EACA,CAnBA;;EAoBAC;IACA;MACA;IACA,CAFA;EAGA,CAxBA;;EAyBAC;IACAC;MACA;IACA,CAHA;;IAIAC;MAAAC;MAAAC;IAAA;MACA;QACA;MACA,CAFA,MAGA;QACA;MACA;;MACA;IACA,CAZA;;IAaAC;MACA;QACA;;QACA;UACA;UACAC;UACAA;UACAC;QACA;;QACA;QACA;QACA;UACAC;YACAC,0BADA;YAEAC,WAFA;YAGAC;UAHA,CADA;UAMAC;YACAC;UADA,CANA;UASAC;YACAC,kBADA;YAEAC,gBAFA;YAGAN,cAHA;YAIAd,sBAJA;YAKAqB,UALA;YAMAC,aANA;YAMA;YACAC,YAPA;YAOA;YACAC;cACAC,cADA;cAEAF,UAFA;cAGAG;YAHA;UARA,CATA;UAuBAC,SACA;YACAC,WADA;YAEAC,aAFA;YAGAC,sBAHA;YAIA9B,iBAJA;YAKA+B;cACAC;gBACAP;kBACA,iBACA,SADA,EAEA,SAFA,EAGA,SAHA,EAIA,SAJA,EAKA,SALA,EAMA,SANA,EAOA,SAPA,EAQA,SARA;;kBAUA;oBACAQ;oBACAC;oBACA;kBACA;;kBACA;gBACA;cAlBA;YADA;UALA,CADA;QAvBA;QAsDAC;MACA,CAjEA;IAkEA;;EAhFA;AAzBA","names":["require","name","props","data","typeName","created","mounted","methods","rowStyle","tableRowClassName","row","rowIndex","initEcharts","obj","serviceData","title","text","left","textAlign","tooltip","trigger","legend","orient","bottom","top","align","width","textStyle","color","overflow","series","type","radius","center","itemStyle","normal","colorList","i","myChart"],"sourceRoot":"src/components","sources":["Pie.vue"],"sourcesContent":["<template>\r\n  <el-container>\r\n    <el-main>\r\n      <div v-for=\"(item,index) in chosenDataPie\" :key=\"index\" class=\"floatFrame\">\r\n        <span class=\"s-1\" />\r\n        <span class=\"s-2\" />\r\n        <span class=\"s-3\" />\r\n        <span class=\"s-4\" />\r\n      <el-container>\r\n        <el-aside width=\"55%\">\r\n            <div :id=\"`chartPie${index}`\" :style=\"{width: '450px', height: '550px',fontSize:'25px', margin:'60px 0px 0px 70px', left:'10px'}\"></div>\r\n        </el-aside>\r\n        <el-main width=\"45%\">\r\n            <el-table :data= chosenDataPie[index].arr :cell-style=\"rowStyle\" style=\"width: 100%; top: 10px\" :header-cell-style=\"rowStyle\" :row-class-name=\"tableRowClassName\">\r\n              <el-table-column prop=\"string\" label=\"条目\" width=\"195\"></el-table-column>\r\n              <el-table-column prop=\"num\" label=\"值\" width=\"195\"></el-table-column>\r\n            </el-table>\r\n        </el-main>\r\n      </el-container>\r\n        <div :style=\"{margin:'60px 0px 0px 60px'}\"></div>\r\n      </div>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\nconst echarts = require('echarts/lib/echarts');\r\nrequire('echarts/lib/component/title');\r\nrequire('echarts/lib/component/tooltip');\r\nrequire('echarts/lib/component/legend');\r\nrequire('echarts/lib/chart/pie');\r\n\r\nexport default {\r\n  name: \"Pie.vue\",\r\n  props: ['chosenDataPie','dataOfCheckPie', 'typeOfOptionsPie'],\r\n  data(){\r\n    return{\r\n      typeName: []\r\n    }\r\n  },\r\n  created() {\r\n    let i, j;\r\n    // 按照后端提供的i，相应地对应报表名称\r\n    for(i=0;i<this.dataOfCheckPie.length;i++){\r\n      for(j=0;j<this.typeOfOptionsPie.length;j++){\r\n        if(this.dataOfCheckPie[i] == this.typeOfOptionsPie[j].id){\r\n          this.typeName.push(this.typeOfOptionsPie[j].name);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(()=>{\r\n      this.initEcharts();\r\n    })\r\n  },\r\n  methods:{\r\n    rowStyle(){\r\n      return 'text-align: center';\r\n    },\r\n    tableRowClassName({row, rowIndex}) {\r\n      if (row.num > 15) {\r\n        return 'warning-row';\r\n      }\r\n      else if (row.num < 8) {\r\n        return 'success-row';\r\n      }\r\n      return 'normal-row';\r\n    },\r\n    initEcharts() {\r\n      this.chosenDataPie.forEach((val,index) => {\r\n        let serviceData = [];\r\n        for(let i=0;i< this.chosenDataPie[index].arr.length;i++){\r\n          let obj=new Object();\r\n          obj.name=this.chosenDataPie[index].arr[i].string;\r\n          obj.value=this.chosenDataPie[index].arr[i].num;\r\n          serviceData[i]=obj;\r\n        }\r\n        let i = 0;\r\n        let myChart = echarts.init(document.getElementById(`chartPie${ index }`));\r\n        let option = {\r\n          title: {\r\n            text: this.typeName[index],\r\n            left: '50%',\r\n            textAlign: 'center'\r\n          },\r\n          tooltip: {\r\n            trigger: 'item'\r\n          },\r\n          legend: {\r\n            orient: 'vertical',\r\n            bottom: 'bottom',\r\n            left: 'center',\r\n            data: serviceData.name,\r\n            top: '80%',\r\n            align: 'left', //图例在左，文字在右\r\n            width: '440',// 这个定义图例的总宽度，\r\n            textStyle: {\r\n              color: 'black',\r\n              width: 130,\r\n              overflow: 'break'\r\n            }\r\n          },\r\n          series: [\r\n            {\r\n              type: 'pie',\r\n              radius: '50%',\r\n              center: ['50%', '42%'],\r\n              data: serviceData,\r\n              itemStyle: {\r\n                normal: {\r\n                  color: function (colors) {\r\n                    let colorList = [\r\n                      '#65B581',\r\n                      '#FFCE34',\r\n                      '#FD665F',\r\n                      '#ffff79',\r\n                      '#ffac27',\r\n                      '#ff4333',\r\n                      '#ffdca7',\r\n                      '#afff79',\r\n                    ];\r\n                    if(colorList[colors.dataIndex] == null){\r\n                      colorList.push(colorList[i]);\r\n                      i = (i + 1) % 8;\r\n                      return colorList[8];\r\n                    }\r\n                    return colorList[colors.dataIndex];\r\n                  }\r\n                },\r\n              }\r\n            }\r\n          ]\r\n        }\r\n        myChart.setOption(option);\r\n      })\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n/deep/.el-table::before{\r\n  width: 85% !important;\r\n}\r\n\r\n/deep/.el-table .warning-row {\r\n  background: #fde6ef;\r\n}\r\n\r\n/deep/.el-table .success-row {\r\n  background: #f0f9eb;\r\n}\r\n\r\n/deep/.el-table .normal-row {\r\n  background: oldlace;\r\n}\r\n/deep/.el-card__body, .el-main{\r\n  padding: 10px;\r\n}\r\n\r\n.floatFrame {\r\n  overflow: hidden;\r\n  position: relative;\r\n  border: 1px solid rgba(11, 85, 140, 0.5);\r\n}\r\nspan {\r\n  position: absolute;\r\n  display: block;\r\n}\r\n.s-1 {\r\n  filter: hue-rotate(0deg);\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 3px;\r\n  background: linear-gradient(90deg, transparent, #3a86ff);\r\n  animation: animate1 4s linear infinite;\r\n}\r\n.s-2 {\r\n  filter: hue-rotate(60deg);\r\n  top: -100%;\r\n  right: 0;\r\n  width: 3px;\r\n  height: 100%;\r\n  background: linear-gradient(180deg, transparent, #3a86ff);\r\n  animation: animate2 4s linear infinite;\r\n  animation-delay: 1s;\r\n}\r\n.s-3 {\r\n  filter: hue-rotate(120deg);\r\n  bottom: 0;\r\n  right: 0;\r\n  width: 100%;\r\n  background: linear-gradient(270deg, transparent, #3a86ff);\r\n  animation: animate3 4s linear infinite;\r\n  animation-delay: 2s;\r\n}\r\n.s-4 {\r\n  filter: hue-rotate(300deg);\r\n  bottom: -100%;\r\n  left: 0;\r\n  width: 3px;\r\n  height: 100%;\r\n  background: linear-gradient(360deg, transparent, #3a86ff);\r\n  animation: animate4 4s linear infinite;\r\n  animation-delay: 3s;\r\n}\r\n@keyframes animate1 {\r\n  0% {\r\n    left: -100%;\r\n  }\r\n  50%,\r\n  100% {\r\n    left: 100%;\r\n  }\r\n}\r\n@keyframes animate2 {\r\n  0% {\r\n    top: -100%;\r\n  }\r\n  50%,\r\n  100% {\r\n    top: 100%;\r\n  }\r\n}\r\n@keyframes animate3 {\r\n  0% {\r\n    right: -100%;\r\n    height: 3px;\r\n  }\r\n  50%,\r\n  100% {\r\n    height: 2px;\r\n    right: 100%;\r\n  }\r\n}\r\n@keyframes animate4 {\r\n  0% {\r\n    bottom: -100%;\r\n  }\r\n  50%,\r\n  100% {\r\n    bottom: 100%;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}